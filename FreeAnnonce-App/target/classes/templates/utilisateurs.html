<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
<meta charset="UTF-8"></meta>
<title>Création comte utilisateur</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css"
	th:href="@{CSS/bootstrap.min.css}" />

<!-- Website CSS style -->
<link rel="stylesheet" type="text/css" th:href="@{CSS/home.css}" />

<!-- Website Font style -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" />

<!-- Google Fonts -->
<link href='https://fonts.googleapis.com/css?family=Passion+One'
	rel='stylesheet' type='text/css' />
<link href='https://fonts.googleapis.com/css?family=Oxygen'
	rel='stylesheet' type='text/css' />


</head>

<body class="home" ng-app="myApp" ng-controller="UtilisateursCtrl"
	ng-init="initPageData()">
	<div class="container-fluid display-table">
		<div class="row display-table-row">

			<!-- NAVIGATION BAR -->
			<div ng-include="'nav.html'"></div>

			<div class="col-md-10 col-sm-11 display-table-cell v-align">
				<!-- HEADER BAR -->
				<div ng-include="'header.html'"></div>


				<!-- PAGE CONTAINER BAR -->
				<div id="pageContainer" class="container ">
					<button type="button" style="float: right" class="add-project"
						data-toggle="modal" data-target="#modalCreateUser">Nouvel utilisateur</button>

					<br/>
					<!-- Modal -->
					<div id="modalCreateUser" class="modal fade" role="dialog">
						<div class="modal-dialog">

							<!-- Modal content-->
							<form name="form" action="">
								<div class="modal-content">
									<div class="modal-header login-header">
										<button type="button" class="close" data-dismiss="modal">X</button>
										<h4 class="modal-title">Nouvel utilisateur</h4>
									</div>
									<div class=" modal-body">
										<div class="form-group">
											<label for="prenom">Prénom</label> <input type="text"
												class="form-control" id="prenom" placeholder="Prénom"
												ng-model="user.prenom" required="required" />
										</div>
										<div class="form-group">
											<label for="nom">Nom</label> <input type="text"
												class="form-control" id="nom" placeholder="Nom"
												ng-model="user.nom" required="required" />
										</div>
										<div class="form-group">
											<label for="email">Email</label> <input type="email"
												class="form-control" id="email" placeholder="Email"
												ng-model="user.email" required="required" />
										</div>
										<div class="form-group">
											<label for="Téléphone">Téléphone</label> <input type="tel"
												class="form-control" id="telephone" placeholder="Téléphone"
												ng-model="user.tel" required="required" />
										</div>
										<div class="form-group">
											<label for="role">Role</label> <select ng-model="user.roleId"
												required="required" class="form-control">
												<option ng-repeat="r in allRoles" value="{{r.pk_roles}}">{{r.libelle}}</option>
											</select>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="cancel" data-dismiss="modal">Close</button>
										<button type="submit" ng-click="save()" class="add-project" >Enregistrer</button>
									</div>

								</div>

							</form>
						</div>
					</div>


					<br/><br/>
					<table class="table table-striped table-bordered">
						<thead>
							<tr>
							<!-- <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> -->
								<th class="col-tools"></th>
								<th>Id utilisateur</th>
								<th>Prénom</th>
								<th>Nom</th>
								<th>Login</th>
								<th>Email</th>
								<th>Téléphone</th>
								<th>Role</th>
								<th>Création</th>
								<th>Derniere connexion</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="u in allUsers">
								<td align="center">
								<form action="">
									<button type="submit" class="btn btn-default" ng-click=""><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
									<button type="submit" class="btn btn-danger" ng-click="deleteUser(u.pk_utilisateur, item)" data="{{ u.pk_utilisateur }}"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
								</form>
								</td>
								<td>{{ u.pk_utilisateur }}</td>
								<td>{{ u.prenom }}</td>
								<td>{{ u.nom }}</td>
								<td>{{ u.profil.login }}</td>
								<td>{{ u.adresseMail}}</td>
								<td>{{ u.numeroTelephone }}</td>
								<td>{{ u.roles.libelle }}</td>
								<td>{{ u.profil.dateCreation | date:'yyyy-MM-dd HH:mm' }}</td>
								<td>{{ u.profil.dateDerniereConnexion | date:'yyyy-MM-dd HH:mm' }}</td>
							</tr>
						</tbody>
					</table>

					<div class="container col-sm-offset-3 col-md-6" role="dialog">

					</div>

				</div>



			</div>
		</div>
	</div>


	<script type="text/javascript"
		src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" th:src="@{JS/angular.min.js}"></script>
	<script type="text/javascript" th:src="@{JS/bootstrap.min.js}"></script>
	<script type="text/javascript" th:src="@{JS/login.js}"></script>
	<script type="text/javascript" th:src="@{JS/myApp.js}"></script>
</body>
</html>

